{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { uiActions } from './uiReducer';\nimport axios from 'axios';\nconst initialState = {\n  cartItems: [],\n  totalQuantity: 0,\n  showCart: false,\n  changed: false\n};\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    replaceCart(state, action) {\n      state.totalQuantity = action.payload.totalQuantity;\n      state.cartItems = action.payload.cartItems;\n    },\n\n    addItemToCart(state, action) {\n      const newItem = action.payload;\n      const existingItem = state.cartItems.find(item => item.title === newItem.title);\n\n      if (!existingItem) {\n        state.cartItems.push({\n          title: newItem.title,\n          price: newItem.price,\n          quantity: 1,\n          id: newItem.id\n        });\n      } else {\n        existingItem.quantity++;\n      }\n\n      state.totalQuantity++;\n      state.changed = true;\n    },\n\n    removeItemFromCart(state, action) {\n      const itemRemoved = action.payload;\n      const existingItem = state.cartItems.find(item => item.title === itemRemoved.title);\n\n      if (existingItem.quantity === 1) {\n        state.cartItems = state.cartItems.filter(item => item.title !== itemRemoved.title);\n      } else {\n        existingItem.quantity--;\n      }\n\n      state.totalQuantity--;\n      state.changed = true;\n    },\n\n    toggleCart(state) {\n      state.showCart = !state.showCart;\n    }\n\n  }\n});\nexport const fetchCartData = () => {\n  return async dispatch => {\n    const fetchData = async () => {\n      const response = await axios.get('https://redux-max-project-default-rtdb.firebaseio.com/cart.json');\n      return JSON.parse(response.data.body);\n    };\n\n    try {\n      const cartData = await fetchData();\n      dispatch(cartActions.replaceCart(cartData));\n    } catch (error) {\n      dispatch(uiActions.showNotification({\n        status: 'error',\n        title: 'Error!',\n        message: 'Fetching cart data failed!'\n      }));\n    }\n  };\n};\nexport const sendCartData = cart => {\n  return async dispatch => {\n    dispatch(uiActions.showNotification({\n      status: 'pending',\n      title: 'Sending...',\n      message: 'Sending cart data!'\n    }));\n\n    const sendRequest = async () => {\n      await axios.put('https://redux-max-project-default-rtdb.firebaseio.com/cart.json', {\n        body: JSON.stringify({\n          cartItems: cart.cartItems,\n          totalQuantity: cart.totalQuantity\n        })\n      });\n    };\n\n    try {\n      await sendRequest();\n      dispatch(uiActions.showNotification({\n        status: 'success',\n        title: 'Success!',\n        message: 'Sent cart data successfully!'\n      }));\n    } catch (error) {\n      dispatch(uiActions.showNotification({\n        status: 'error',\n        title: 'Error!',\n        message: 'Sending cart data failed!'\n      }));\n    }\n  };\n};\nexport const cartActions = cartSlice.actions;\nexport const cartReducer = cartSlice.reducer;","map":{"version":3,"names":["createSlice","uiActions","axios","initialState","cartItems","totalQuantity","showCart","changed","cartSlice","name","reducers","replaceCart","state","action","payload","addItemToCart","newItem","existingItem","find","item","title","push","price","quantity","id","removeItemFromCart","itemRemoved","filter","toggleCart","fetchCartData","dispatch","fetchData","response","get","JSON","parse","data","body","cartData","cartActions","error","showNotification","status","message","sendCartData","cart","sendRequest","put","stringify","actions","cartReducer","reducer"],"sources":["C:/Users/T-GAMER/Desktop/01-starting-project/src/store/cartReducer.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { uiActions } from './uiReducer';\r\nimport axios from 'axios';\r\n\r\nconst initialState = {\r\n    cartItems: [],\r\n    totalQuantity: 0,\r\n    showCart: false,\r\n    changed: false,\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState,\r\n    reducers: {\r\n        replaceCart(state, action) {\r\n            state.totalQuantity = action.payload.totalQuantity;\r\n            state.cartItems = action.payload.cartItems;\r\n        },\r\n        addItemToCart(state, action) {\r\n            const newItem = action.payload;\r\n            const existingItem = state.cartItems.find(\r\n                (item) => item.title === newItem.title\r\n            );\r\n            if (!existingItem) {\r\n                state.cartItems.push({\r\n                    title: newItem.title,\r\n                    price: newItem.price,\r\n                    quantity: 1,\r\n                    id: newItem.id,\r\n                });\r\n            } else {\r\n                existingItem.quantity++;\r\n            }\r\n            state.totalQuantity++;\r\n            state.changed = true;\r\n        },\r\n        removeItemFromCart(state, action) {\r\n            const itemRemoved = action.payload;\r\n            const existingItem = state.cartItems.find(\r\n                (item) => item.title === itemRemoved.title\r\n            );\r\n            if (existingItem.quantity === 1) {\r\n                state.cartItems = state.cartItems.filter(\r\n                    (item) => item.title !== itemRemoved.title\r\n                );\r\n            } else {\r\n                existingItem.quantity--;\r\n            }\r\n            state.totalQuantity--;\r\n            state.changed = true;\r\n        },\r\n        toggleCart(state) {\r\n            state.showCart = !state.showCart;\r\n        },\r\n    },\r\n});\r\n\r\nexport const fetchCartData = () => {\r\n    return async (dispatch) => {\r\n        const fetchData = async () => {\r\n            const response = await axios.get(\r\n                'https://redux-max-project-default-rtdb.firebaseio.com/cart.json'\r\n            );\r\n\r\n            return JSON.parse(response.data.body);\r\n        };\r\n\r\n        try {\r\n            const cartData = await fetchData();\r\n            dispatch(cartActions.replaceCart(cartData));\r\n        } catch (error) {\r\n            dispatch(\r\n                uiActions.showNotification({\r\n                    status: 'error',\r\n                    title: 'Error!',\r\n                    message: 'Fetching cart data failed!',\r\n                })\r\n            );\r\n        }\r\n    };\r\n};\r\n\r\nexport const sendCartData = (cart) => {\r\n    return async (dispatch) => {\r\n        dispatch(\r\n            uiActions.showNotification({\r\n                status: 'pending',\r\n                title: 'Sending...',\r\n                message: 'Sending cart data!',\r\n            })\r\n        );\r\n\r\n        const sendRequest = async () => {\r\n            await axios.put(\r\n                'https://redux-max-project-default-rtdb.firebaseio.com/cart.json',\r\n                {\r\n                    body: JSON.stringify({\r\n                        cartItems: cart.cartItems,\r\n                        totalQuantity: cart.totalQuantity,\r\n                    }),\r\n                }\r\n            );\r\n        };\r\n\r\n        try {\r\n            await sendRequest();\r\n\r\n            dispatch(\r\n                uiActions.showNotification({\r\n                    status: 'success',\r\n                    title: 'Success!',\r\n                    message: 'Sent cart data successfully!',\r\n                })\r\n            );\r\n        } catch (error) {\r\n            dispatch(\r\n                uiActions.showNotification({\r\n                    status: 'error',\r\n                    title: 'Error!',\r\n                    message: 'Sending cart data failed!',\r\n                })\r\n            );\r\n        }\r\n    };\r\n};\r\n\r\nexport const cartActions = cartSlice.actions;\r\nexport const cartReducer = cartSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}